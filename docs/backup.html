<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Backup & Sync - PocketDemon Manual</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <nav class="sidebar">
        <div class="logo">
            <h1>PocketDemon</h1>
            <p class="tagline">Concert Tracker</p>
        </div>
        <ul class="nav-links">
            <li><a href="index.html">Home</a></li>
            <li><a href="getting-started.html">Getting Started</a></li>
            <li class="nav-section">Core Features</li>
            <li><a href="bands.html">Bands</a></li>
            <li><a href="events.html">Events & Concerts</a></li>
            <li><a href="venues.html">Venues</a></li>
            <li><a href="statistics.html">Statistics</a></li>
            <li><a href="maps.html">Maps</a></li>
            <li class="nav-section">Social</li>
            <li><a href="buddies.html">Concert Buddies</a></li>
            <li><a href="sharing.html">Sharing</a></li>
            <li class="nav-section">Collections</li>
            <li><a href="wishlist.html">Wishlist</a></li>
            <li><a href="gallery.html">Photo Gallery</a></li>
            <li><a href="collection.html">Media Collection</a></li>
            <li><a href="merch.html">Merchandise</a></li>
            <li class="nav-section">Data</li>
            <li><a href="backup.html" class="active">Backup & Sync</a></li>
            <li><a href="import.html">Import Data</a></li>
            <li><a href="integrations.html">Integrations</a></li>
            <li class="nav-section">More</li>
            <li><a href="achievements.html">Achievements</a></li>
            <li><a href="spending.html">Spending Tracker</a></li>
            <li><a href="year-in-review.html">Year in Review</a></li>
            <li><a href="settings.html">Settings</a></li>
            <li><a href="faq.html">FAQ</a></li>
        </ul>
        <div class="version">v1.0.22</div>
    </nav>

    <main class="content">
        <header>
            <button class="menu-toggle" aria-label="Toggle menu">&#9776;</button>
            <h1>Backup & Sync</h1>
        </header>

        <section class="page-content">
            <h2>Protecting Your Data</h2>
            <p>PocketDemon offers multiple ways to backup and sync your concert data.</p>

            <h2>Local Backup (JSON)</h2>
            <p>Export your entire database to a JSON file:</p>
            <ol>
                <li>Go to <strong>Settings</strong> &rarr; <strong>Backup & Restore</strong></li>
                <li>Tap <strong>Export Backup</strong></li>
                <li>Choose where to save the file</li>
                <li>File includes all bands, events, venues, buddies, and settings</li>
            </ol>

            <h3>Restoring from Backup</h3>
            <ol>
                <li>Go to <strong>Settings</strong> &rarr; <strong>Backup & Restore</strong></li>
                <li>Tap <strong>Import Backup</strong></li>
                <li>Select your backup JSON file</li>
                <li>Review the import summary</li>
                <li>Confirm to restore</li>
            </ol>

            <div class="info-box warning">
                <h4>Warning</h4>
                <p>Restoring a backup will replace your current data. Make sure to backup first!</p>
            </div>

            <h2>CSV Export</h2>
            <p>Export data in spreadsheet-compatible format:</p>
            <ol>
                <li>Go to <strong>Settings</strong> &rarr; <strong>Export</strong></li>
                <li>Select what to export (Bands, Events, Venues)</li>
                <li>Tap <strong>Export CSV</strong></li>
                <li>Open in Excel, Google Sheets, etc.</li>
            </ol>

            <h2>Dropbox Cloud Sync</h2>
            <p>The recommended way to backup and sync across devices.</p>

            <h3>Setting Up Dropbox</h3>
            <ol>
                <li>Go to <strong>Settings</strong> &rarr; <strong>Cloud Sync</strong></li>
                <li>Tap <strong>Connect to Dropbox</strong></li>
                <li>Sign in to your Dropbox account</li>
                <li>Authorize PocketDemon</li>
                <li>You'll be redirected back to the app</li>
            </ol>

            <h3>Manual Sync</h3>
            <ol>
                <li>Go to <strong>Settings</strong> &rarr; <strong>Cloud Sync</strong></li>
                <li>Tap <strong>Sync Now</strong></li>
                <li>Wait for sync to complete</li>
                <li>Status shows last sync time</li>
            </ol>

            <h3>Auto-Sync</h3>
            <p>Enable automatic background sync:</p>
            <ol>
                <li>Go to <strong>Settings</strong> &rarr; <strong>Cloud Sync</strong></li>
                <li>Enable <strong>Auto-Sync</strong></li>
                <li>Sync runs when you leave the app</li>
                <li>15-minute cooldown to save battery</li>
            </ol>

            <div class="info-box tip">
                <h4>Tip</h4>
                <p>Auto-sync is battery-friendly. It only syncs when you background the app, not continuously.</p>
            </div>

            <h2>What Gets Synced</h2>
            <table>
                <tr>
                    <th>Data Type</th>
                    <th>Synced</th>
                </tr>
                <tr>
                    <td>Bands</td>
                    <td>Yes - including photos, logos</td>
                </tr>
                <tr>
                    <td>Events</td>
                    <td>Yes - including photos</td>
                </tr>
                <tr>
                    <td>Venues</td>
                    <td>Yes - including photos</td>
                </tr>
                <tr>
                    <td>Concerts (band at event)</td>
                    <td>Yes</td>
                </tr>
                <tr>
                    <td>Ratings & Reviews</td>
                    <td>Yes</td>
                </tr>
                <tr>
                    <td>Buddies</td>
                    <td>Yes</td>
                </tr>
                <tr>
                    <td>Wishlist</td>
                    <td>Yes</td>
                </tr>
                <tr>
                    <td>Achievements</td>
                    <td>Yes</td>
                </tr>
                <tr>
                    <td>Collection & Merch</td>
                    <td>Yes</td>
                </tr>
                <tr>
                    <td>Settings</td>
                    <td>Partial (preferences sync)</td>
                </tr>
            </table>

            <h2>Photo Sync</h2>
            <p>Photos can also be synced to Dropbox:</p>
            <ol>
                <li>Enable <strong>Photo Sync</strong> in Cloud Sync settings</li>
                <li>Photos upload during sync</li>
                <li>Restore photos when setting up a new device</li>
            </ol>

            <div class="info-box note">
                <h4>Note</h4>
                <p>Photos are compressed before sync to save storage and bandwidth.</p>
            </div>

            <h2>Conflict Resolution</h2>
            <p>When the same record is modified on multiple devices:</p>
            <ul>
                <li>Field-level merging is used when possible</li>
                <li>Last-write-wins for conflicting fields</li>
                <li>Deterministic tie-breaking (same result on all devices)</li>
                <li>Conflict history is recorded for debugging</li>
            </ul>

            <h2>Sync Troubleshooting</h2>

            <h3>Sync Stuck or Failing</h3>
            <ol>
                <li>Check internet connection</li>
                <li>Try <strong>Sync Now</strong> manually</li>
                <li>If still failing, disconnect and reconnect Dropbox</li>
            </ol>

            <h3>Missing Data After Sync</h3>
            <ol>
                <li>Wait for sync to fully complete</li>
                <li>Pull-to-refresh on list screens</li>
                <li>Check if data exists on another device</li>
            </ol>

            <h3>Disconnecting Dropbox</h3>
            <ol>
                <li>Go to <strong>Settings</strong> &rarr; <strong>Cloud Sync</strong></li>
                <li>Tap <strong>Disconnect</strong></li>
                <li>Local data remains intact</li>
                <li>Cloud data remains in Dropbox</li>
            </ol>

            <h2>Desktop OAuth</h2>
            <p>On Windows, macOS, and Linux, Dropbox login works via localhost redirect:</p>
            <ol>
                <li>Click <strong>Connect to Dropbox</strong></li>
                <li>Browser opens to Dropbox login</li>
                <li>After authorization, browser redirects to localhost</li>
                <li>App captures the token automatically</li>
            </ol>
        </section>

        <footer>
            <p>&copy; 2024-2025 Technodystopia. All rights reserved.</p>
        </footer>
    </main>

    <script src="script.js"></script>
</body>
</html>
